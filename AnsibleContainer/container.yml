version: "2"
settings:
  # The Conductor container does the heavy lifting, and provides a portable
  # Python runtime for building your target containers. It should be derived
  # from the same distribution as you're building your target containers with.

  # We choose Jessie as  the Conductor base since that's what the mysqldb is using.
  conductor_base: centos:7

services:
  apiserver:
    from: centos:7
    roles:
#   - AAROC.certificates
      - AAROC.fgapi
    ports:
      - 8888:8888
    command: ['/bin/true']
    privileged: True

  db:
    from: mysql
    roles:
  #   - AAROC.certificates
      - AAROC.fg-db
    ports:
      - 3306:3306
    environment:
      - MYSQL_ROOT_PASSWORD=password
      - MYSQL_USER=futuregateway
      - MYSQL_USER_PASSWORD=futuregateway
    command: ['mysqld']
    entrypoint: ['/entrypoint.sh']
    volumes:
      - $PWD:/var/lib/mysql
    privileged: True
  # Add your containers here, specifying the base image you want to build from
  # For example:
  #
  # web:
  #   from: centos:7
  #   roles:
  #     - apache-container
  #   ports:
  #     - "80:80"
  #   command: ['/usr/bin/dumb-init', '/usr/sbin/apache2ctl', '-D', 'FOREGROUND']
  #   dev_overrides:
  #     environment:
  #       - "DEBUG=1"
  #
registries:
  # Add optional registries used for deployment. For example:
  #  google:
  #    url: https://gcr.io
  #    namespace: my-cool-project-xxxxxx
  quay:
    url: https://quay.io
    namespace: aaroc
